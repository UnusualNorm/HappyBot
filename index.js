require('rimraf')('Tor',()=>require('https').get("https://dist.torproject.org/torbrowser/11.0.11/tor-win32-0.4.6.10.zip",res=>res.pipe(require('unzipper').Extract({path:'Tor'}).on('close',()=>require('child_process').spawn('Tor/Tor/tor.exe').stdout.on('data',d=>!!String(d).match(/100%/)?new(require('discord.js').Client)({intents:['GUILDS','GUILD_MESSAGES']}).on('messageCreate',async(m)=>m.type=='DEFAULT'||'REPLY'?require('tor-request').request({url:'http://text-processing.com/api/sentiment/',method:'POST',body:`text=${m.content}`},(err,res,body)=>err||res.statusCode!=200?res.statusCode==503?(()=>{require('tor-request').newTorSession();m.delete().catch(console.error)})():m.delete().catch(console.error):(()=>{try{JSON.parse(body).label=='pos'?null:m.delete().catch(console.error)}catch(e){console.error(e);m.delete().catch(console.error)}})()):null).login(process.argv[2]).catch(console.error):null)))))
